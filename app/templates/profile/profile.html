{% from "import/macros.html" import badge, parse %}

{% extends "base.html" %}

{% block content %}
	<div class="container p-3 mt-5 md-5 ms-5 me-5 rounded">
		<div class="row">
			<div class="col-3">
				<img src="{{ user.avatar(512) }}" width="512" height="512" class="img-thumbnail"><br><br>
				<h3>{{ user.username }}</h3>
				{% if not current_user.is_anonymous and current_user.id == user.id %}
					<p><a class="link-secondary link-underline-opacity-0" data-bs-toggle="modal" data-bs-target="#editEmailModal">{{ user.email if user.email != "" else "Change E-Mail" }}</a></p>
				{% endif %}
				{{ badge(user) }}
				<hr>

				<h1 class="display-6">Level {{ user.points//100 }}</h1>
				<div class="progress color-container" role="progressbar">
					<div class="progress-bar color-bg" style="width: {{ user.points%100 }}%">{{ user.points }}</div>
				</div>

				{% if not current_user.is_anonymous and current_user.id == user.id %}
					<br><br>
					<button class="btn color-container" data-bs-toggle="modal" data-bs-target="#editProfileModal">Edit description</button>
					{% if user.points//100 > 0 %}
						<button class="btn color-container" data-bs-toggle="modal" data-bs-target="#level{{ user.points//100 }}Modal">Level features</button>
					{% endif %}
				{% endif %}
			</div>
			<div class="col p-3 rounded color-container">
				{% for line in user.description.split("\n") %}
					{{ parse(line, user) }}
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}
